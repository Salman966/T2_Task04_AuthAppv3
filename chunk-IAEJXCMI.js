import{b as C,c as _,d as M,e as O,f as y,h as k}from"./chunk-LGCOYUID.js";import{i as D,j as w}from"./chunk-JX4KCMVS.js";import{Ba as g,Fa as m,Ma as d,Oa as n,Pa as r,Qa as u,R as l,Sa as f,Xa as s,Ya as h,Za as b,ha as p,qa as c,qb as P,rb as x,sa as a,xb as v}from"./chunk-BN5C3YFC.js";function T(i,t){i&1&&(n(0,"div",11),s(1," Loading... "),r())}function F(i,t){i&1&&u(0,"router-outlet")}var R=class i{http=l(v);route=l(C);router=l(M);fb=l(D);user=null;allPosts=[];userPosts=[];loading=p(!0);tabForm=this.fb.group({selectedTab:["all"]});get selectedTab(){return this.tabForm.get("selectedTab")?.value}constructor(){let t=this.route.snapshot.data.user;if(!t||!t.user){this.router.navigate(["/"],{replaceUrl:!0});return}this.user=t.user,this.fetchPosts(),this.tabForm.get("selectedTab")?.valueChanges.subscribe(()=>{this.loading.set(!0),setTimeout(()=>this.loading.set(!1),300)})}fetchPosts(){this.loading.set(!0),this.http.get("https://dummyjson.com/posts").subscribe({next:t=>{this.allPosts=t.posts,this.http.get(`https://dummyjson.com/posts/user/${this.user?.id}`).subscribe({next:o=>{this.userPosts=o.posts,this.loading.set(!1)},error:()=>this.loading.set(!1)})},error:()=>this.loading.set(!1)})}deletePost(t){this.loading.set(!0),this.http.delete(`https://dummyjson.com/posts/${t}`).subscribe({next:()=>{this.allPosts=this.allPosts.filter(o=>o.id!==t),this.userPosts=this.userPosts.filter(o=>o.id!==t),this.loading.set(!1)},error:()=>this.loading.set(!1)})}logout(){localStorage.removeItem("authUser"),this.router.navigateByUrl("/",{replaceUrl:!0})}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=g({type:i,selectors:[["app-dashboard"]],decls:18,vars:6,consts:[[1,"dashboard"],[1,"header"],[1,"user-info"],["alt","User Image",1,"user-image",3,"src"],[1,"user-details"],[1,"logout-button",3,"click"],[1,"tabs"],["routerLink","all-posts","routerLinkActive","active"],["routerLink","my-posts","routerLinkActive","active"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),u(3,"img",3),n(4,"div",4)(5,"h2"),s(6),r(),n(7,"p"),s(8),r()()(),n(9,"button",5),f("click",function(){return e.logout()}),s(10,"Logout"),r()(),n(11,"div",6)(12,"a",7),s(13,"All Posts"),r(),n(14,"a",8),s(15,"My Posts"),r()(),m(16,T,2,0,"div",9)(17,F,1,0,"router-outlet",10),r()),o&2&&(a(3),d("src",e.user==null?null:e.user.image,c),a(3),b("",e.user==null?null:e.user.firstName," ",e.user==null?null:e.user.lastName,""),a(2),h(e.user==null?null:e.user.email),a(8),d("ngIf",e.loading()),a(),d("ngIf",!e.loading()))},dependencies:[x,P,w,k,_,O,y],styles:[".dashboard[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:20px;font-family:Arial,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.user-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-right:15px}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px}.user-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#555}.logout-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:10px 18px;border-radius:5px;font-weight:700;cursor:pointer;transition:background-color .3s ease}.logout-button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:25px;gap:12px}.tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 20px;text-decoration:none;border-radius:6px;background-color:#e0e0e0;color:#333;font-weight:500;transition:background-color .3s ease,color .3s ease}.tabs[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   a.router-link-active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.loading-spinner[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#007bff;padding:15px}.posts[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.post[_ngcontent-%COMP%]{border:1px solid #ddd;padding:20px;border-radius:10px;background-color:#fafafa;box-shadow:0 2px 6px #0000000a}.post-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.post-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.post-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:6px 12px;border-radius:5px;font-size:14px;cursor:pointer;transition:background-color .2s ease}.post-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.no-posts[_ngcontent-%COMP%]{text-align:center;color:#999;font-style:italic;margin-top:30px}"]})};export{R as DashboardComponent};
