import{a as C}from"./chunk-HXCBLBTN.js";import{a as M}from"./chunk-5KK4JV54.js";import{a as v}from"./chunk-DQ2KTUME.js";import{Ba as c,Fa as f,Ma as i,Oa as n,Pa as p,R as r,Ra as g,Sa as u,Ta as _,X as d,Xa as h,Y as l,ha as m,pb as y,qb as b,rb as P,sa as a}from"./chunk-BN5C3YFC.js";function w(o,e){if(o&1){let t=g();n(0,"app-post-item",3),u("delete",function(O){d(t);let I=_();return l(I.onDelete(O))}),p()}if(o&2){let t=e.$implicit;i("title",t.title)("body",t.body)("postId",t.id)}}function D(o,e){o&1&&(n(0,"div",4),h(1," You have no posts yet. "),p())}var x=class o{api=r(v);auth=r(C);loading=m(!0);posts=[];constructor(){this.loadUserPosts()}loadUserPosts(){this.loading.set(!0);let e=this.auth.getUser();if(!e?.id){this.loading.set(!1);return}this.api.getUserPosts(e.id).subscribe({next:t=>{this.posts=t.posts,this.loading.set(!1)},error:()=>this.loading.set(!1)})}onDelete(e){this.loading.set(!0),this.api.deletePost(e).subscribe({next:()=>{this.posts=this.posts.filter(t=>t.id!==e),this.loading.set(!1)},error:()=>this.loading.set(!1)})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=c({type:o,selectors:[["app-my-posts"]],decls:3,vars:2,consts:[[1,"posts"],[3,"title","body","postId","delete",4,"ngFor","ngForOf"],["class","no-posts",4,"ngIf"],[3,"delete","title","body","postId"],[1,"no-posts"]],template:function(t,s){t&1&&(n(0,"div",0),f(1,w,1,3,"app-post-item",1)(2,D,2,0,"div",2),p()),t&2&&(a(),i("ngForOf",s.posts),a(),i("ngIf",s.posts.length===0&&!s.loading()))},dependencies:[P,y,b,M],styles:[".post[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:10px 0}.post[_ngcontent-%COMP%]:last-child{border-bottom:none}.post-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.post-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer}"]})};export{x as MyPostsComponent};
