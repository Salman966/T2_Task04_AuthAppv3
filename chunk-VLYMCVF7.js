import{h as F,i as A,j as P}from"./chunk-JX4KCMVS.js";import{Ba as v,Fa as d,Ma as p,Oa as i,Pa as s,R as a,Ra as _,Sa as h,Ta as m,X as f,Xa as l,Y as u,Ya as c,ha as g,pb as b,qb as y,rb as x,sa as r,xb as C}from"./chunk-BN5C3YFC.js";function E(o,n){o&1&&(i(0,"div",3),l(1," Loading posts... "),s())}function w(o,n){if(o&1){let t=_();i(0,"div",6)(1,"div",7)(2,"h3"),l(3),s(),i(4,"button",8),h("click",function(){let M=f(t).$implicit,O=m(2);return u(O.onDelete(M.value.id))}),l(5,"Delete"),s()(),i(6,"p"),l(7),s()()}if(o&2){let t=n.$implicit;r(3),c(t.value.title),r(4),c(t.value.body)}}function D(o,n){if(o&1&&(i(0,"div",4),d(1,w,8,2,"div",5),s()),o&2){let t=m();r(),p("ngForOf",t.posts.controls)}}function G(o,n){o&1&&(i(0,"div",9),l(1," No posts found. "),s())}var I=class o{http=a(C);fb=a(A);loading=g(!0);postFormArray=new F([]);constructor(){this.loadPosts()}loadPosts(){this.loading.set(!0),this.http.get("https://dummyjson.com/posts").subscribe({next:n=>{let t=n.posts.map(e=>this.fb.group({id:[e.id],title:[e.title],body:[e.body]}));this.postFormArray.clear(),t.forEach(e=>this.postFormArray.push(e)),this.loading.set(!1)},error:()=>this.loading.set(!1)})}onDelete(n){this.loading.set(!0),this.http.delete(`https://dummyjson.com/posts/${n}`).subscribe({next:()=>{let t=this.postFormArray.controls.findIndex(e=>e.value.id===n);t!==-1&&this.postFormArray.removeAt(t),this.loading.set(!1)},error:()=>this.loading.set(!1)})}get posts(){return this.postFormArray}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=v({type:o,selectors:[["app-all-posts"]],decls:3,vars:3,consts:[["class","loading-spinner",4,"ngIf"],["class","posts",4,"ngIf"],["class","no-posts",4,"ngIf"],[1,"loading-spinner"],[1,"posts"],["class","post",4,"ngFor","ngForOf"],[1,"post"],[1,"post-header"],[3,"click"],[1,"no-posts"]],template:function(t,e){t&1&&d(0,E,2,0,"div",0)(1,D,2,1,"div",1)(2,G,2,0,"div",2),t&2&&(p("ngIf",e.loading()),r(),p("ngIf",!e.loading()&&e.posts.length>0),r(),p("ngIf",!e.loading()&&e.posts.length===0))},dependencies:[x,b,y,P],styles:[".post[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:10px 0}.post[_ngcontent-%COMP%]:last-child{border-bottom:none}.post-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.post-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer}"]})};export{I as AllPostsComponent};
